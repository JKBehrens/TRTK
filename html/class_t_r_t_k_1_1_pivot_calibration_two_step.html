<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Transformation and Registration Toolkit: TRTK::PivotCalibrationTwoStep&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<script src="../mathjax/MathJax.js">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespace_t_r_t_k.html">TRTK</a>      </li>
      <li><a class="el" href="class_t_r_t_k_1_1_pivot_calibration_two_step.html">PivotCalibrationTwoStep</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>TRTK::PivotCalibrationTwoStep&lt; T &gt; Class Template Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="TRTK::PivotCalibrationTwoStep" --><!-- doxytag: inherits="TRTK::PivotCalibration" -->
<p>Pivot point calibration.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_pivot_calibration_8hpp_source.html">PivotCalibration.hpp</a>&gt;</code></p>
<!-- startSectionHeader --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for TRTK::PivotCalibrationTwoStep&lt; T &gt;:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><div id="dynsection-0-summary" class="dynsummary" style="display:block;">
<!-- endSectionSummary --></div>
<!-- startSectionContent --><div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_t_r_t_k_1_1_pivot_calibration_two_step__inherit__graph.png" border="0" usemap="#_t_r_t_k_1_1_pivot_calibration_two_step_3_01_t_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="_t_r_t_k_1_1_pivot_calibration_two_step_3_01_t_01_4_inherit__map" id="_t_r_t_k_1_1_pivot_calibration_two_step_3_01_t_01_4_inherit__map">
<area shape="rect" id="node2" href="class_t_r_t_k_1_1_pivot_calibration.html" title="This is the common interface for all pivot&#45;point&#45;calibration classes." alt="" coords="31,5,216,32"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center><!-- endSectionContent --></div>
<!-- startSectionHeader --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for TRTK::PivotCalibrationTwoStep&lt; T &gt;:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><div id="dynsection-1-summary" class="dynsummary" style="display:block;">
<!-- endSectionSummary --></div>
<!-- startSectionContent --><div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_t_r_t_k_1_1_pivot_calibration_two_step__coll__graph.png" border="0" usemap="#_t_r_t_k_1_1_pivot_calibration_two_step_3_01_t_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="_t_r_t_k_1_1_pivot_calibration_two_step_3_01_t_01_4_coll__map" id="_t_r_t_k_1_1_pivot_calibration_two_step_3_01_t_01_4_coll__map">
<area shape="rect" id="node2" href="class_t_r_t_k_1_1_pivot_calibration.html" title="This is the common interface for all pivot&#45;point&#45;calibration classes." alt="" coords="31,5,216,32"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center><!-- endSectionContent --></div>

<p><a href="class_t_r_t_k_1_1_pivot_calibration_two_step-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4258e6a8be4e8e774f40cd6f609d4cc0"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::value_type" ref="a4258e6a8be4e8e774f40cd6f609d4cc0" args="" -->
typedef T&#160;</td><td class="memItemRight" valign="bottom"><b>value_type</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a27b172cbdb6683c88b2950f971e2bd6e"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::Vector3T" ref="a27b172cbdb6683c88b2950f971e2bd6e" args="" -->
typedef super::Vector3T&#160;</td><td class="memItemRight" valign="bottom"><b>Vector3T</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0f23e902a67cf7996027e3fbbef181e7"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::Vector4T" ref="a0f23e902a67cf7996027e3fbbef181e7" args="" -->
typedef super::Vector4T&#160;</td><td class="memItemRight" valign="bottom"><b>Vector4T</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2aad537f1c016d9d9682d85d9bbad39d"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::VectorXT" ref="a2aad537f1c016d9d9682d85d9bbad39d" args="" -->
typedef super::VectorXT&#160;</td><td class="memItemRight" valign="bottom"><b>VectorXT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac351af37d1898483d3fd6f006c8012be"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::Matrix3T" ref="ac351af37d1898483d3fd6f006c8012be" args="" -->
typedef super::Matrix3T&#160;</td><td class="memItemRight" valign="bottom"><b>Matrix3T</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad47f932649ebc73431efd2d331651c58"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::MatrixXT" ref="ad47f932649ebc73431efd2d331651c58" args="" -->
typedef super::MatrixXT&#160;</td><td class="memItemRight" valign="bottom"><b>MatrixXT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88ba16360692fd5949463a6f3121e610"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::Point" ref="a88ba16360692fd5949463a6f3121e610" args="" -->
typedef <a class="el" href="class_t_r_t_k_1_1_coordinate.html">super::Point</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Point</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96a44c00042462dfe21ed01cac7247b0"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::DataType" ref="a96a44c00042462dfe21ed01cac7247b0" args="" -->
typedef super::DataType&#160;</td><td class="memItemRight" valign="bottom"><b>DataType</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>Error</b> { <b>NOT_ENOUGH_INPUT_DATA</b>, 
<b>UNEQUAL_CARDINALITY_OF_INPUT_SETS</b>, 
<b>UNKNOWN_ERROR</b>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a970418cc066d3c55d0779c5396d5883e"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::Matrix4T" ref="a970418cc066d3c55d0779c5396d5883e" args="" -->
typedef Eigen::Matrix&lt; T, 4, 4 &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>Matrix4T</b></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad41f0b0f6e714a335c8cf41d429c9339"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::getNumberItemsRequired" ref="ad41f0b0f6e714a335c8cf41d429c9339" args="() const " -->
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_r_t_k_1_1_pivot_calibration_two_step.html#ad41f0b0f6e714a335c8cf41d429c9339">getNumberItemsRequired</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the minimum number of locations and rotations needed for the algorithm. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46c3d3bbc415f3c1c47b9c9c56c2ca7d"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::setLocations" ref="a46c3d3bbc415f3c1c47b9c9c56c2ca7d" args="(Range&lt; Vector3T &gt; locations)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setLocations</b> (<a class="el" href="class_t_r_t_k_1_1_range.html">Range</a>&lt; Vector3T &gt; locations)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a67d7e60b2d2212154f27afe1e79a65ce"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::setRotations" ref="a67d7e60b2d2212154f27afe1e79a65ce" args="(Range&lt; Matrix3T &gt; rotations)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setRotations</b> (<a class="el" href="class_t_r_t_k_1_1_range.html">Range</a>&lt; Matrix3T &gt; rotations)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a279a64566976dbc8cab293c699c5792a"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::compute" ref="a279a64566976dbc8cab293c699c5792a" args="()" -->
T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_r_t_k_1_1_pivot_calibration_two_step.html#a279a64566976dbc8cab293c699c5792a">compute</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the RMSE. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92068e347bf3601d5e4903143a77911a"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::getRMSE" ref="a92068e347bf3601d5e4903143a77911a" args="() const " -->
T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_r_t_k_1_1_pivot_calibration_two_step.html#a92068e347bf3601d5e4903143a77911a">getRMSE</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the RMSE of the last computation. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a240f8578711bee045f4a9616d949d993"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::getPivotPoint" ref="a240f8578711bee045f4a9616d949d993" args="() const " -->
const Vector3T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_r_t_k_1_1_pivot_calibration_two_step.html#a240f8578711bee045f4a9616d949d993">getPivotPoint</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pivot point (or tool tip) in world coordinates. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a230155e74b23fb86c4ee27899a215d1e"></a><!-- doxytag: member="TRTK::PivotCalibrationTwoStep::getLocalPivotPoint" ref="a230155e74b23fb86c4ee27899a215d1e" args="() const " -->
const Vector3T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_r_t_k_1_1_pivot_calibration_two_step.html#a230155e74b23fb86c4ee27899a215d1e">getLocalPivotPoint</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pivot point (or tool tip) in local coordinates. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T&gt;<br/>
 class TRTK::PivotCalibrationTwoStep&lt; T &gt;</h3>

<p>Pivot point calibration. </p>
<dl><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">T</td><td>scalar (floating point) type</td></tr>
  </table>
  </dd>
</dl>
<p>This class estimates the pivot point of a rigid body whose movement is constraind to rotate around a certain pivot point and whose movement is tracked via a localization system. Typical examples of application include the tool tip calibration or the hip center determination.</p>
<p>The calibration procedure to obtain a tool tip location is as follows: The tool tip is placed in a divot and the tool is moved around this pivot point while always touching the divot with its tip. The location as well as the rotation of the sensor system is saved for each sampling instance. Then this list is passed to one of the pivot calibration algorithms and the sought location/translation is computed.</p>
<div align="center">
<img src="Tool Tip Calibration (small).png" alt="Tool Tip Calibration (small).png"/>
<p><strong>Movement of a tool while recording data for the tool tip calibration.</strong></p></div>
<p> Given a new measurement of the tracker (which comprises the position \( t_i \) and orientation \( R_i \) of the sensor in the global coordinate system) the pivot point the tool tip location in global coordinates can be easily computed as \( p_{global} = R_i * p_{local} + * t_i \).</p>
<dl class="user"><dt><b>Algorithm:</b></dt><dd></dd></dl>
<div class="fragment"><pre class="fragment">
  *  As described in the details section, during the calibration procedure,
  *  an object is moved around a pivot point. For example a tool is moved in
  *  such a way that the tool tip remains stationary at a particular position
  *  (which is the pivot point). While moving the object (e.g. the tool) the
  *  object's sensor moves along a circular arc (or in three dimensions on a
  *  calotte of a sphere). Now, in a first step, the center point (= pivot
  *  point) as well as the radius of this sphere are estimated by a simple
  *  least square scheme (that's done in global coordinates).
  *
  *  Provided the object is still positioned as described above (e.g. the tool
  *  tip still is stationary), using a single measurement (R_i, t_i) the
  *  global pivot point p' can be easily transformed into a local coordinate
  *  p via the relation
  *
  *      p' = R * p + t    ==&gt;    p = R^(-1) * (p' - t)
  *
  *  where R is the rotation and t the location of the sensor in the global
  *  coordinate system. However, due to noise, various results for p should
  *  be averaged.
  *
  *  Implementation details:
  *
  *  Instead of recording a new set of pairs of (R_i, t_i) after having
  *  determined the virtual sphere, the former measurement is used.
  * </pre></div><dl class="user"><dt><b>Example:</b></dt><dd></dd></dl>
<p>For some example code please be referred to <a class="el" href="class_t_r_t_k_1_1_pivot_calibration.html">PivotCalibration</a>.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_t_r_t_k_1_1_pivot_calibration.html" title="This is the common interface for all pivot-point-calibration classes.">TRTK::PivotCalibration</a>, <a class="el" href="class_t_r_t_k_1_1_ransac_pivot_calibration_model.html" title="This class implements the Ransac::Model interface for all PivotCalibration classes.">TRTK::RansacPivotCalibrationModel</a>, <a class="el" href="class_t_r_t_k_1_1_coordinate.html" title="A generic coordinate class.">TRTK::Coordinate</a> and <a class="el" href="class_t_r_t_k_1_1_transform3_d.html" title="Affine or projective transformation in 3D.">TRTK::Transform3D</a></dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Christoph Haenisch </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.0.0 </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>last changed on 2016-07-25 </dd></dl>

<p>Definition at line <a class="el" href="_pivot_calibration_8hpp_source.html#l00859">859</a> of file <a class="el" href="_pivot_calibration_8hpp_source.html">PivotCalibration.hpp</a>.</p>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>D:/Users/haenisch/Programmierung/C++/TRTK/include/TRTK/<a class="el" href="_pivot_calibration_8hpp_source.html">PivotCalibration.hpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/>
    <address class="footer">
        <small>
            Copyright 2010 - 2016 by Christoph Hänisch,
            Chair of Medical Engineering (mediTEC),
            RWTH Aachen University <p>
            Documentation generated by <a href="http://www.doxygen.org/index.html"> Doxygen </a>
        </small>
    </address>

</body>
</html>
